name: Deploy London Transit Project
on:
  push:
    branches:
    # for testing only remove when done
      - "dev.ap.cidcd"
      - main

jobs: 
  deploy:
    runs-on: unbuntu-latest
      strategy: 
        matrix:
          node-version: [12.x]
      steps: 
        - uses: actions/checkout@v1
        - name: Use node version ${{ matrix.node-version }}
          uses: actions/setup-node@v1
          with: 
            node-version: ${{ matrix.node-version }} 
        - name: Install Packages
          run: npm install
        - name: Set Env Variables
          uses: allenevans/set-env@2.0.0
          with:
            GENERATE_SOURCEMAP: false
            REACT_APP_MAPBOX_API: ${{ secrets.ENV_SECRET }}
        - name: Build the APP
          run: npm run build
